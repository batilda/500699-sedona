var storageArrival,storageDeparture,storageAdults,storageChildren,i,bookingBtn=document.querySelector(".booking__btn"),searchBtn=document.querySelector(".search__btn"),bookingForm=document.querySelector(".booking__form"),bookingFormClosed=!0,bookingArrival=document.querySelector(".booking__input[name=arrival-date]"),bookingDeparture=document.querySelector(".booking__input[name=departure-date]"),bookingAdults=document.querySelector(".booking__input[name=booking-adults]"),bookingChildren=document.querySelector(".booking__input[name=booking-children]"),bookingMinusAdults=document.querySelector(".js-minus--adults"),bookingPlusAdults=document.querySelector(".js-plus--adults"),bookingMinusChildren=document.querySelector(".js-minus--children"),bookingPlusChildren=document.querySelector(".js-plus--children"),ADULTS_MIN=1,ADULTS_MAX=10,CHILDREN_MIN=0,CHILDREN_MAX=10,bookingFields=[bookingArrival,bookingDeparture,bookingAdults,bookingChildren],isStorageSupport=!0;bookingForm.classList.add("js-booking__modal");try{storageArrival=localStorage.getItem("bookingArrival"),storageDeparture=localStorage.getItem("bookingDeparture"),storageAdults=localStorage.getItem("bookingAdults"),storageChildren=localStorage.getItem("bookingChildren")}catch(o){isStorageSupport=!1}function removeErrorsFromInputs(o){for(i=0;i<o.length;i++)o[i].classList.remove("js__input--error")}storageArrival&&(bookingArrival.value=storageArrival),storageDeparture&&(bookingDeparture.value=storageDeparture),storageAdults&&"0"!=storageAdults&&(bookingAdults.value=storageAdults),storageChildren&&(bookingChildren.value=storageChildren),bookingBtn.addEventListener("click",function(o){o.preventDefault(),bookingFormClosed?(bookingForm.classList.remove("js-booking__crawl--in"),bookingForm.classList.add("js-booking__crawl--out"),bookingFormClosed=!1,storageArrival?storageDeparture?storageAdults?storageChildren&&bookingArrival.focus():bookingAdults.focus():bookingDeparture.focus():bookingArrival.focus()):(bookingForm.classList.remove("js-booking__crawl--out"),bookingForm.classList.add("js-booking__crawl--in"),bookingFormClosed=!0)}),bookingMinusAdults.addEventListener("click",function(o){o.preventDefault(),bookingAdults.value>ADULTS_MIN?bookingAdults.value--:bookingAdults.value=ADULTS_MIN}),bookingPlusAdults.addEventListener("click",function(o){o.preventDefault(),bookingAdults.value<ADULTS_MAX?bookingAdults.value++:bookingAdults.value=ADULTS_MAX}),bookingMinusChildren.addEventListener("click",function(o){o.preventDefault(),bookingChildren.value>CHILDREN_MIN?bookingChildren.value--:bookingChildren.value=CHILDREN_MIN}),bookingPlusChildren.addEventListener("click",function(o){o.preventDefault(),bookingChildren.value<CHILDREN_MAX?bookingChildren.value++:bookingChildren.value=CHILDREN_MAX}),searchBtn.addEventListener("click",function(o){removeErrorsFromInputs(bookingFields),bookingArrival.value&&bookingDeparture.value&&bookingAdults.value&&"0"!=bookingAdults.value?(removeErrorsFromInputs(bookingFields),isStorageSupport&&(localStorage.setItem("bookingArrival",bookingArrival.value),localStorage.setItem("bookingDeparture",bookingDeparture.value),localStorage.setItem("bookingAdults",bookingAdults.value),localStorage.setItem("bookingChildren",bookingChildren.value))):(o.preventDefault(),bookingArrival.value||bookingArrival.classList.add("js__input--error"),bookingDeparture.value||bookingDeparture.classList.add("js__input--error"),bookingAdults.value&&"0"!=bookingAdults.value||bookingAdults.classList.add("js__input--error"))}),window.addEventListener("keydown",function(o){27===o.keyCode&&(o.preventDefault(),bookingForm.classList.contains("js-booking__crawl--out")||(bookingForm.classList.remove("js-booking__crawl--out"),bookingForm.classList.add("js-booking__crawl--in"),bookingFormClosed=!0))});
